{% extends 'base.html' %}


{% block content %}
<div class="container">
    <h2>Manage Your Budgets</h2>

    <!-- Weekly Budget Form -->
    <h3>Weekly Budget</h3>
    <form method="post">
        {% csrf_token %}
        <div>
            <label for="{{ weekly_form.amount.id_for_label }}">Amount:</label>
            {{ weekly_form.amount }}
            {{ weekly_form.amount.errors }}
        </div>
        <div>
            <label for="{{ weekly_form.start_date.id_for_label }}">Start Date:</label>
            {{ weekly_form.start_date }}
            {{ weekly_form.start_date.errors }}
        </div>
        <button type="submit" name="weekly_budget">Create/Update Weekly Budget</button>
    </form>
    
    <!-- Existing Weekly Budgets -->
    {% for budget in weekly_budgets %}
        <div>
            <p>Budget from {{ budget.start_date }} to {{ budget.end_date }}: {{ budget.amount }}</p>
            <form method="post" action="{% url 'update_budget' budget.id 'weekly' %}">
                {% csrf_token %}
                <button type="submit" name="update_weekly">Edit</button>
            </form>
            <form method="post">
                {% csrf_token %}
                <input type="hidden" name="budget_id" value="{{ budget.id }}">
                <button type="submit" name="delete_weekly">Delete</button>
            </form>
        </div>
    {% endfor %}

    <!-- Monthly Budget Form -->
    <h3>Monthly Budget</h3>
    <form method="post">
        {% csrf_token %}
        <div>
            <label for="{{ monthly_form.amount.id_for_label }}">Amount:</label>
            {{ monthly_form.amount }}
            {{ monthly_form.amount.errors }}
        </div>
        <div>
            <label for="{{ monthly_form.start_date.id_for_label }}">Start Date:</label>
            {{ monthly_form.start_date }}
            {{ monthly_form.start_date.errors }}
        </div>
        <button type="submit" name="monthly_budget">Create/Update Monthly Budget</button>
    </form>
    
    <!-- Existing Monthly Budgets -->
    {% for budget in monthly_budgets %}
        <div>
            <p>Budget from {{ budget.start_date }} to {{ budget.end_date }}: {{ budget.amount }}</p>
            <form method="post" action="{% url 'update_budget' budget.id 'monthly' %}">
                {% csrf_token %}
                <button type="submit" name="update_monthly">Edit</button>
            </form>
            <form method="post">
                {% csrf_token %}
                <input type="hidden" name="budget_id" value="{{ budget.id }}">
                <button type="submit" name="delete_monthly">Delete</button>
            </form>
        </div>
    {% endfor %}

    <!-- Yearly Budget Form -->
    <h3>Yearly Budget</h3>
    <form method="post">
        {% csrf_token %}
        <div>
            <label for="{{ yearly_form.amount.id_for_label }}">Amount:</label>
            {{ yearly_form.amount }}
            {{ yearly_form.amount.errors }}
        </div>
        <div>
            <label for="{{ yearly_form.start_date.id_for_label }}">Start Date:</label>
            {{ yearly_form.start_date }}
            {{ yearly_form.start_date.errors }}
        </div>
        <button type="submit" name="yearly_budget">Create/Update Yearly Budget</button>
    </form>
    
    <!-- Existing Yearly Budgets -->
    {% for budget in yearly_budgets %}
        <div>
            <p>Budget from {{ budget.start_date }} to {{ budget.end_date }}: {{ budget.amount }}</p>
            <form method="post" action="{% url 'update_budget' budget.id 'yearly' %}">
                {% csrf_token %}
                <button type="submit" name="update_yearly">Edit</button>
            </form>
            <form method="post">
                {% csrf_token %}
                <input type="hidden" name="budget_id" value="{{ budget.id }}">
                <button type="submit" name="delete_yearly">Delete</button>
            </form>
        </div>
    {% endfor %}
</div>
{% endblock %}
