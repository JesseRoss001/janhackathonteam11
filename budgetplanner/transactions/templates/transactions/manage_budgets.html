{% extends 'base.html' %}
{% block content %}
<div class="container">
    <h2>Manage Your Budgets</h2>

    <!-- Weekly Budget Form -->
    <h3>Weekly Budget</h3>
    <form method="post">
        {% csrf_token %}
        {{ weekly_form.amount }}
        {{ weekly_form.start_date }}
        <button type="submit" name="create_weekly">Create/Update Weekly Budget</button>
    </form>
    {% for error in weekly_form.non_field_errors %}
        <div class="alert alert-danger">{{ error }}</div>
    {% endfor %}

    <!-- Existing Weekly Budgets -->
    {% for budget in weekly_budgets %}
        <div>
            <p>Budget from {{ budget.start_date }} to {{ budget.end_date }}: {{ budget.amount }}</p>
            <form method="post" action="{% url 'update_budget' budget.id 'weekly' %}">
                {% csrf_token %}
                <button type="submit">Edit</button>
            </form>
            <form method="post">
                {% csrf_token %}
                <input type="hidden" name="budget_id" value="{{ budget.id }}">
                <button type="submit" name="delete_weekly">Delete</button>
            </form>
        </div>
    {% endfor %}

    <!-- Monthly Budget Form -->
    <h3>Monthly Budget</h3>
    <form method="post">
        {% csrf_token %}
        {{ monthly_form.amount }}
        {{ monthly_form.start_date }}
        <button type="submit" name="create_monthly">Create/Update Monthly Budget</button>
    </form>
    {% for error in monthly_form.non_field_errors %}
        <div class="alert alert-danger">{{ error }}</div>
    {% endfor %}

    <!-- Existing Monthly Budgets -->
    {% for budget in monthly_budgets %}
        <div>
            <p>Budget from {{ budget.start_date }} to {{ budget.end_date }}: {{ budget.amount }}</p>
            <form method="post" action="{% url 'update_budget' budget.id 'monthly' %}">
                {% csrf_token %}
                <button type="submit">Edit</button>
            </form>
            <form method="post">
                {% csrf_token %}
                <input type="hidden" name="budget_id" value="{{ budget.id }}">
                <button type="submit" name="delete_monthly">Delete</button>
            </form>
        </div>
    {% endfor %}

    <!-- Yearly Budget Form -->
    <h3>Yearly Budget</h3>
    <form method="post">
        {% csrf_token %}
        {{ yearly_form.amount }}
        {{ yearly_form.start_date }}
        <button type="submit" name="create_yearly">Create/Update Yearly Budget</button>
    </form>
    {% for error in yearly_form.non_field_errors %}
        <div class="alert alert-danger">{{ error }}</div>
    {% endfor %}

    <!-- Existing Yearly Budgets -->
    {% for budget in yearly_budgets %}
        <div>
            <p>Budget from {{ budget.start_date }} to {{ budget.end_date }}: {{ budget.amount }}</p>
            <form method="post" action="{% url 'update_budget' budget.id 'yearly' %}">
                {% csrf_token %}
                <button type="submit">Edit</button>
            </form>
            <form method="post">
                {% csrf_token %}
                <input type="hidden" name="budget_id" value="{{ budget.id }}">
                <button type="submit" name="delete_yearly">Delete</button>
            </form>
        </div>
    {% endfor %}
</div>
{% endblock %}
