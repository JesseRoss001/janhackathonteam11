{% extends 'base.html' %}  <!-- Extend your base template -->

{% block content %}
<div class="container">
    <h2>Manage Your Budget</h2>

    <!-- Display messages -->
    {% if messages %}
    <div>
        {% for message in messages %}
        <div class="alert {% if message.tags %}alert-{{ message.tags }}{% endif %}">
            {{ message }}
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <!-- Budget Form -->
    <form method="post">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit" class="btn btn-primary">Save Budget</button>
    </form>

    <!-- Budget Details -->
    {% if budget %}
    <div class="mt-4">
        <h3>Budget Details:</h3>
        <p><strong>Total Budget:</strong> {{ budget.total_budget }}</p>
        <p><strong>Budget Balance:</strong> {{ budget.budget_balance }}</p>
        <p><strong>Budget Health:</strong> {{ budget_health }}</p>
        <p><strong>Savings Goal:</strong> {{ budget.savings_goal }}</p>
        <p><strong>Savings Progress:</strong> {{ savings_progress }}%</p>
        
        <!-- Predictive Budgeting -->
        {% if future_budget %}
        <p><strong>Future Budget Prediction (6 months):</strong> {{ future_budget }}</p>
        {% endif %}
    </div>
    {% else %}
    <p>No budget data available. Please create a budget.</p>
    {% endif %}
</div>
{% endblock %}